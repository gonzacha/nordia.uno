# HOTFIX: Redirect Next.js hardcoded paths to demo subdirectory
RewriteEngine On
RewriteRule ^_next/(.*)$      demo/next/$1      [L]
RewriteRule ^themes/(.*)$     demo/themes/$1    [L]
RewriteRule ^simulacion/(.*)$ demo/simulacion/$1 [L]

# Allow access to _next directory and files starting with underscore
<Files ~ "^_">
    Require all granted
</Files>

# Allow access to demo/_next directory
<Directory "/demo/_next">
    Require all granted
</Directory>

# Ensure proper MIME types for JS and CSS files
AddType application/javascript .js
AddType text/css .css

# Enable gzip compression for better performance
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/html
</IfModule>